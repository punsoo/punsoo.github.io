---
defaults:
  - scope:
      path: ""
      type: posts
    values:
      layout: single
      author_profile: true
      comments: true
      share: true
      related: true

title: "Spring Core Basic(1)"
excerpt: "ìŠ¤í”„ë§ í•µì‹¬ ê¸°ë³¸(1)"
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"
categories:
  - Spring
tags:
  - [Spring, ê¹€ì˜í•œ, ìŠ¤í”„ë§ í•µì‹¬ ê¸°ë³¸]
date: 2021-07-27
last_modified_at: 2021-07-27
---

## ìŠ¤í”„ë§ì˜ íƒ„ìƒ ë°°ê²½

ì˜›ë‚ ì—ëŠ” ìë°” ì§„ì˜ì—ì„œ EJB (Enterprise Java Beans) ê°€ ì •íŒŒì˜ ê¸°ìˆ ë¡œ ì—¬ê²¨ì¡Œë‹¤.

ì•ˆì •ì ì¸ ê¸°ìˆ ë¡œ ì—¬ê²¨ì ¸ì„œ ê¸°ìˆ  ì˜ì—…ë„ ì˜ë˜ì—ˆê³  ì˜¤í”ˆ ì†ŒìŠ¤ëŠ” ì•ˆì •ì„± ë¬¸ì œ ë•Œë¬¸ì— ë„ì…ì´ ì•ˆë˜ë˜ ì‹œì ˆì´ì—ˆë‹¤.

EJBëŠ” íŠ¸ëœì­ì…˜, ë¶„ì‚° ì„œë²„, Entity Beanì´ë¼ëŠ” ORM ê¸°ìˆ ì„ ê°€ì§€ê³  ìˆì—ˆë‹¤. (ë‚˜ë¦„ ì¥ì ì´ ë§ì•˜ë‹¤)

í•˜ì§€ë§Œ ë¹„ìš©ì´ ë„ˆë¬´ ë¹„ìŒŒì„ ë¿ë”ëŸ¬ (ì„œë²„ í•œëŒ€ì— ìˆ˜ì²œë§Œì›?) ë„ˆë¬´ ì–´ë µê³  ë³µì¡í–ˆë‹¤.

ë„ˆë¬´ EJB ì˜ì¡´ì ìœ¼ë¡œ ê°œë°œí•˜ë‹¤ë³´ë©´ ì½”ë“œ ë˜í•œ ì§€ì €ë¶„í•´ì§€ê³  ë³µì¡í•´ì¡Œë‹¤... ğŸ˜¢ğŸ˜«

ë¬´ì—‡ë³´ë‹¤ ê°ì²´ì§€í–¥ì´ ê°€ì§„ ì¢‹ì€ ì¥ì ì„ ë‹¤ ìƒì–´ë²„ë¦¬ê²Œ ë˜ì—ˆë‹¤.

ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ POJO(Plain Old Java Object) ë¼ëŠ” êµ¬í˜¸ê°€ ë‚˜ì˜¤ê¸° ì‹œì‘í–ˆëŠ”ë° ì˜¤ë˜ëœ ë°©ì‹ì˜ ê°„ë‹¨í•œ ìë°” ì˜¤ë¸Œì íŠ¸ë¼ëŠ” ë§ì´ë‹¤. í•œë§ˆë””ë¡œ ìˆœìˆ˜ ê³¼ê±° ìë°” ìŠ¤íƒ€ì¼ë¡œ ëŒì•„ê°€ìëŠ” ëœ»ì´ì—ˆë‹¤. EJBë¼ëŠ” ë¬´ê±°ìš´ í”„ë ˆì„ì›Œí¬ì— ì¢…ì†ëœ ë¬´ê±°ìš´ ê°ì²´ë¥¼ ë§Œë“¤ê²Œ ëœ ê²ƒì— ê°œë°œìë“¤ì´ ë°˜ë°œí•´ì„œ ì‚¬ìš©í•˜ê²Œ ëœ ìš©ì–´ì´ë‹¤.

ê²°êµ­ Gavin Kingì´ë¼ëŠ” ì‚¬ëŒì´ í•˜ì´ë²„ë„¤ì´íŠ¸ë¼ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ë¥¼ ë§Œë“¤ê¸° ì‹œì‘í–ˆë‹¤.

í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” EJB ì—”í‹°í‹°ë¹ˆ ê¸°ìˆ ì„ ëŒ€ì²´í•˜ì˜€ê³  JPA(Java Persistence API) ì˜ ìƒˆë¡œìš´ í‘œì¤€ì„ ì •ì˜í•˜ì˜€ë‹¤. 

JPAëŠ” í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ê³  ì´ê²ƒì„ êµ¬í˜„í•œ í•˜ì´ë²„ë„¤ì´íŠ¸, EclipseLink ë“±ì˜ ë²¤ë”ë“¤ì´ ìˆë‹¤.

í˜„ì¬ ìë°” ORM ì‹œì¥ì€ ê±°ì˜ JPAê°€ ì°¨ì§€í•˜ê³  ìˆê³  JPA êµ¬í˜„ì²´ ì¤‘ì—ì„œë„ í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì£¼ë¡œ ì“°ì¸ë‹¤.

Rod Johnsonì´ EJB ë¥¼ ëŒ€ì²´í•˜ìëŠ” ì±…ì„ ì¶œê°„í•œ ì´í›„ Juergen Hoeller(ìœ ê² íœ ëŸ¬), Yann Caroff(ì–€ ì¹´ë¡œí”„)ê°€ Rod Johnsonì—ê²Œ ì˜¤í”ˆ ì†ŒìŠ¤í”„ë¡œì íŠ¸ë¥¼ ì œì•ˆí•˜ì˜€ë‹¤.

ê²°êµ­ Rod Johnson ì´ë¼ëŠ” ì‚¬ëŒì´ EJB ì»¨í…Œì´ë„ˆë¥¼ ëŒ€ì²´í•  ìŠ¤í”„ë§ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë§Œë“¤ê¸° ì‹œì‘í–ˆë‹¤.

ìŠ¤í”„ë§ì˜ í•µì‹¬ ì½”ë“œì˜ ìƒë‹¹ìˆ˜ëŠ” Juergen Hoellerê°€ ê°œë°œí•˜ê³  ìˆê³  ì§€ê¸ˆë„ í˜„ì¬ì§„í–‰í˜•ì´ë‹¤.

ìŠ¤í”„ë§ì˜ ì´ë¦„ì€ ì „í†µì ì¸ EJB(J2EE)ë¼ëŠ” ê²¨ìš¸ì„ ë„˜ì–´ ìƒˆë¡œìš´ ì‹œì‘ì´ë¼ëŠ” ëœ»ì´ë‹¤.



## ìŠ¤í”„ë§ ë²„ì „ë³„ íŠ¹ì§•

- 2003ë…„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 1.0 ì¶œì‹œ - XML (ë‹¹ì‹œ ëŒ€ì„¸)
- 2006ë…„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 2.0 ì¶œì‹œ - XML í¸ì˜ ê¸°ëŠ¥ ì§€ì›
- 2009ë…„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 3.0 ì¶œì‹œ - ìë°” ì½”ë“œë¡œ ì„¤ì •(XML ì—†ì´)
- 2013ë…„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 4.0 ì¶œì‹œ - ìë°” 8 ì§€ì›
- 2014ë…„ ìŠ¤í”„ë§ ë¶€íŠ¸ 1.0 ì¶œì‹œ - ì„¤ì •ì´ ë„ˆë¬´ ê°„í¸í•´ì¡Œê³  ì„œë²„ ë‚´ì¥ë°©ì‹ì„ íƒí•¨
- 2017ë…„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 5.0 ì¶œì‹œ, ìŠ¤í”„ë§ ë¶€íŠ¸ 2.0 ì¶œì‹œ - ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë° ì§€ì›(ë¹„ë™ê¸° non-blocking ì§€ì› - Node.jsì²˜ëŸ¼)
- 2021ë…„ 7ì›” í˜„ì¬ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 5.3.9, ìŠ¤í”„ë§ ë¶€íŠ¸ 2.5.3

## ìŠ¤í”„ë§ì´ë€?

ìŠ¤í”„ë§ì´ë€ ì—¬ëŸ¬ê°€ì§€ ê¸°ìˆ ì˜ ëª¨ìŒì´ë‹¤.

- ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬
  - í•µì‹¬ ê¸°ìˆ : ìŠ¤í”„ë§ DI ì»¨í…Œì´ë„ˆ, AOP, ì´ë²¤íŠ¸, ê¸°íƒ€
  - ì›¹ ê¸°ìˆ : ìŠ¤í”„ë§ MVC, ìŠ¤í”„ë§ WebFlux
  - ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ : íŠ¸ëœì­ì…˜, JDBC, ORM ì§€ì›, XML ì§€ì›
  - ê¸°ìˆ  í†µí•©: ìºì‹œ, ì´ë©”ì¼, ì›ê²©ì ‘ê·¼, ìŠ¤ì¼€ì¤„ë§
  - í…ŒìŠ¤íŠ¸: ìŠ¤í”„ë§ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì§€ì›
  - ì–¸ì–´: ì½”í‹€ë¦°, ê·¸ë£¨ë¹„
- ìŠ¤í”„ë§ ë¶€íŠ¸
  - ìŠ¤í”„ë§ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›, ìµœê·¼ì—ëŠ” ê¸°ë³¸
  - ë‹¨ë…ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ìƒì„±
  - Tomcat ê°™ì€ ì›¹ ì„œë²„ë¥¼ ë‚´ì¥í•´ì„œ ë³„ë„ì˜ ì›¹ ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë¨
  - ì†ì‰¬ìš´ ë¹Œë“œ êµ¬ì„±ì„ ìœ„í•œ starter ì¢…ì†ì„± ì œê³µ
  - ìŠ¤í”„ë§ê³¼ ì™¸ë¶€(3rt part) ë¼ì´ë¸ŒëŸ¬ë¦¬ ìë™ êµ¬ì„±
  - ë©”íŠ¸ë¦­, ìƒíƒœ í™•ì¸, ì™¸ë¶€ êµ¬ì„± ê°™ì€ í”„ë¡œë•ì…˜ ì¤€ë¹„ ê¸°ëŠ¥ ì œê³µ
  - ê´€ë¡€ì— ì˜í•œ ê°„ê²°í•œ ì„¤ì •
- ìŠ¤í”„ë§ ë°ì´í„° (crudë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ê²ƒ)
- ìŠ¤í”„ë§ ì„¸ì…˜ (ì„¸ì…˜ ê¸°ëŠ¥ì„ í¸í•˜ê²Œ ì‚¬ìš©í•˜ê²Œ í•´ì£¼ëŠ” ê²ƒ)
- ìŠ¤í”„ë§ ì‹œíë¦¬í‹° (ë³´ì•ˆê³¼ ê´€ë ¨ëœ ê²ƒ)
- ìŠ¤í”„ë§ Rest Docs (API ë¬¸ì„œë‘ í…ŒìŠ¤íŠ¸ë¥¼ í¸í•˜ê²Œ ì—®ì–´ì„œ API ë¬¸ì„œë¥¼ í¸ë¦¬í•˜ê²Œ í•´ì£¼ëŠ” ê²ƒ)
- ìŠ¤í”„ë§ ë°°ì¹˜ (ë°°ì¹˜ì²˜ë¦¬ì— íŠ¹í™”ëœ ê¸°ìˆ )
- ìŠ¤í”„ë§ í´ë¼ìš°ë“œ (í´ë¼ìš°ë“œì— íŠ¹í™”ëœ ê¸°ìˆ )

ìŠ¤í”„ë§ì´ë€ ë‹¨ì–´ëŠ” ë¬¸ë§¥ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì‚¬ìš©ëœë‹¤.

- ìŠ¤í”„ë§ DI ì»¨í…Œì´ë„ˆ ê¸°ìˆ  (ex ì†ŒìŠ¤ì½”ë“œ ìƒì—ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ê³  ì–¸ê¸‰í•  ë•Œ)
- ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬
- ìŠ¤í”„ë§ ë¶€íŠ¸, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ë“±ì„ ëª¨ë‘ í¬í•¨í•œ ìŠ¤í”„ë§ ìƒíƒœê³„

### ìŠ¤í”„ë§ì˜ ì§„ì§œ í•µì‹¬

- ìŠ¤í”„ë§ì€ ê°ì²´ì§€í–¥ ì–¸ì–´ì¸ ìë°” ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬
- ìŠ¤í”„ë§ì€ ê°ì²´ ì§€í–¥ ì–¸ì–´ê°€ ê°€ì§„ ê°•ë ¥í•œ íŠ¹ì§•ì„ ì‚´ë ¤ë‚´ëŠ” í”„ë ˆì„ì›Œí¬
- ìŠ¤í”„ë§ì€ ì¢‹ì€ ê°ì²´ ì§€í–¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” í”„ë ˆì„ì›Œí¬



## ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°

- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ ì»´í“¨í„° í”„ë¡œê·¸ë¨ì„ ëª…ë ¹ì–´ì˜ ëª©ë¡ìœ¼ë¡œ ë³´ëŠ” ì‹œê°ì—ì„œ ë²—ì–´ë‚˜ ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ëœ ë‹¨ìœ„, ì¦‰ 'ê°ì²´'ë“¤ì˜ ëª¨ì„ìœ¼ë¡œ íŒŒì•…í•˜ê³ ì í•˜ëŠ” ê²ƒì´ë‹¤. ê°ê°ì˜ ê°ì²´ëŠ” ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ê³ , ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. (í˜‘ë ¥)
- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ í”„ë¡œê·¸ë¨ì„ ìœ ì—°í•˜ê³  ë³€ê²½ì´ ìš©ì´í•˜ê²Œ ë§Œë“¤ê¸° ë•Œë¬¸ì— ëŒ€ê·œëª¨ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì— ë§ì´ ì‚¬ìš©ëœë‹¤.

### ë‹¤í˜•ì„±ì˜ ë³¸ì§ˆ

- ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰ ì‹œì ì— ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- ë‹¤í˜•ì„±ì˜ ë³¸ì§ˆì„ ì´í•´í•˜ë ¤ë©´ í˜‘ë ¥ì´ë¼ëŠ” ê°ì²´ì‚¬ì´ì˜ ê´€ê³„ì—ì„œ ì‹œì‘í•´ì•¼í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ì„œë²„ì˜ êµ¬í˜„ ê¸°ëŠ¥ì„ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ì—ì„œ ì´ì•¼ê¸°í•˜ëŠ” IOC(ì œì–´ì˜ ì—­ì „), DI(ì˜ì¡´ê´€ê³„ ì£¼ì…)ì€ ë‹¤í˜•ì„±ì„ í™œìš©í•´ì„œ ì—­í• ê³¼ êµ¬í˜„ì„ í¸ë¦¬í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.

### ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬

- ì‹¤ì„¸ê³„ì˜ ì—­í• ê³¼ êµ¬í˜„ì´ë¼ëŠ” í¸ë¦¬í•œ ê°œë…ì„ ë‹¤í˜•ì„±ì„ í†µí•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
- ìœ ì—°í•˜ê³ , ë³€ê²½ì´ ìš©ì´í•˜ë©° í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„ì´ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.
- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì˜ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. (ì¸í„°í˜ì´ìŠ¤ ìì²´ì˜ ë³€ê²½ì€ íŒŒê¸‰íš¨ê³¼ê°€ í¬ë‹¤.)

### SOLID ì›ì¹™

- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ (Single responsibility principle)
  - í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ëœ»ì¸ë°, ì´ ê¸°ì¤€ì€ ëª¨í˜¸í•˜ë‹¤.
  - ì¤‘ìš”í•œ ê¸°ì¤€ì€ ë³€ê²½ì´ë‹¤. ë³€ê²½ì´ ìˆì„ ë•Œ íŒŒê¸‰ íš¨ê³¼ê°€ ì ìœ¼ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì˜ ë”°ë¥¸ ê²ƒì´ë‹¤.
  - ex) UI ë³€ê²½ìœ¼ë¡œ sqlì½”ë“œë¶€í„° ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ë‹¤ ê³ ì¹˜ë©´ SRP ì›ì¹™ì— ì–´ê¸‹ë‚œ ê²ƒì´ë‹¤.
  - ex) ê°ì²´ì˜ ìƒì„±ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬í•˜ë„ë¡ í•˜ì.

- OCP ê°œë°© íì‡„ ì›ì¹™ (Open Closed Principle)
  - í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.
  - ë‹¤í˜•ì„±ì„ í™œìš©í•œë‹¤.
  - ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¬ìœ¼ë¡œì¨ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤(í™•ì¥)
  - ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê´€ê´€ê³„ë¥¼ ë§ºì–´ì£¼ëŠ” ë³„ë„ì˜ ì¡°ë¦½, ì„¤ì •ìê°€ í•„ìš”í•˜ë‹¤.(ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì´ ì—­í• ì„ í•œë‹¤!)
- LSP ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ (Liskov Substitution Principle)
  - ê°ì²´ëŠ” í•˜ìœ„ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°”ê¾¸ë”ë¼ë„ í”„ë¡œê·¸ë¨ ë™ì‘ì— ë¬¸ì œê°€ ì—†ì–´ì•¼ í•œë‹¤.
  - ë‹¤í˜•ì„±ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ì›ì¹™ìœ¼ë¡œ, í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì¸í„°í˜ì´ìŠ¤ ê·œì•½ì„ ë‹¤ ì§€í‚¤ë„ë¡ í•˜ì—¬ êµ¬í˜„ì²´ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
- ISP ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ì›ì¹™ (Interface Segregation Principle)
  - íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì—¬ëŸ¬ ê°œê°€ ë²”ìš© ì¸í„°í˜ì´ìŠ¤ í•˜ë‚˜ë³´ë‹¤ ë‚«ë‹¤.
  - ì¸í„°í˜ì´ìŠ¤ì˜ ì—­í• ì´ ëª…í™•í•´ì§€ê³ , ëŒ€ì²´í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.
- DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™ (Dependency Inversion Principle)
  - êµ¬ì²´í™”(êµ¬í˜„ í´ë˜ìŠ¤)ì— ì˜ì¡´í•˜ë©´ ì•ˆë˜ê³ , ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤)ì— ì˜ì¡´í•´ì•¼ í•œë‹¤.
  - ë‹¤ì‹œ ë§í•´ ì—­í• ì— ì˜ì¡´í•˜ê²Œ í•´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
  - êµ¬í˜„ì²´ì— ì˜ì¡´í•˜ê²Œ ë˜ë©´ ë³€ê²½ì´ ì•„ì£¼ ì–´ë ¤ì›Œì§„ë‹¤.

```java
public class MemberService  {
    private MemberRepository memberRepository = new MemoryMemberRepository();
}
```

ì´ì™€ ê°™ì€ ì½”ë“œëŠ” MemberServiceê°€ ì¸í„°í˜ì´ìŠ¤ì¸ MemberRepository ë¿ ì•„ë‹ˆë¼ êµ¬í˜„ì²´ì¸ MemoryMemberRepositoryê¹Œì§€ ì˜ì¡´í•˜ê³  ìˆê¸°ì— DIP ì›ì¹™ì„ ìœ„ë°˜í•œë‹¤. ê·¸ë˜ì„œ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•˜ë ¤ê³  í•˜ë©´ OCP ì›ì¹™ì„ ìœ„ë°˜í•˜ê²Œ ëœë‹¤.

ì¦‰, ê°ì²´ ì§€í–¥ì˜ í•µì‹¬ì´ ë‹¤í–¥ì„±ì´ì§€ë§Œ, ë‹¤í˜•ì„±ë§Œìœ¼ë¡œëŠ” OCPì™€ DIPë¥¼ ì§€í‚¬ ìˆ˜ ì—†ê²Œ ëœë‹¤.

ê·¸ë˜ì„œ ìŠ¤í”„ë§ì—ì„œëŠ” 

- DI(Dependency Injection)
- DI ì»¨í…Œì´ë„ˆ (ê°ì²´ë“¤ì„ ë„£ì–´ë†“ê³  ì˜ì¡´ ê´€ê³„ë¥¼ ì„œë¡œ ì—°ê²°í•´ì£¼ê³  ì£¼ì…í•´ì£¼ëŠ” ê¸°ìˆ )

ë¥¼ ì œê³µí•´ì¤€ë‹¤.

> ì´ìƒì ìœ¼ë¡œëŠ”  ëª¨ë“  ì„¤ê³„ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ ì¢‹ì§€ë§Œ, ì¶”ìƒí™”ë¼ëŠ” ê°œë°œìì˜ ë…¸ë ¥ ë¹„ìš©ì´ ë“¤ì–´ê°„ë‹¤.
>
> ì¦‰,  êµ¬ì²´ êµ¬í˜„ í´ë˜ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ ì½”ë“œë¥¼ í•œë²ˆë” ì‚´í´ë´ì•¼ í•œë‹¤.
>
> ê¹€ì˜í•œ ì„ ìƒë‹˜ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ì—†ëŠ” ê²ƒì€ ë°”ë¡œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³ , í–¥í›„ ê¼­ í•„ìš”í•  ë•Œ ë¦¬íŒ©í† ë§ì„ í†µí•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ì‹ ë‹¤.



## ìŠ¤í”„ë§ ì˜ˆì œ

### ConcurrentHashMap

HashMapì€ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ì‹œì„±ì„ ë³´ì¥í•  ìˆ˜ ì—†ê³ , SynchronizedMapì€ ì†ë„ê°€ ë–¨ì–´ì§„ë‹¤.

ì‹¤ë¬´ì—ì„œëŠ” ì†ë„ë„ ë³´ì¥í•˜ë©´ì„œ ë™ì‹œì„±ì„ ë³´ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ê°€ ConcurrentHashMapê°€ ì“°ì¸ë‹¤.

CocurrentHashMapì´ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- [Compare and Swap](http://tutorials.jenkov.com/java-concurrency/compare-and-swap.html) ë°©ì‹ (ë¹ˆ ë²„í‚·ìœ¼ë¡œì˜ ë…¸ë“œ ì‚½ì…)
- ë¶€ë¶„ì ì¸ lock ìœ¼ë¡œ ìŠ¤ë ˆë“œ ê²½í•© ìµœì†Œí™” (ë²„í‚·ì˜ ì²«ë²ˆì§¸ ë…¸ë“œ ê¸°ì¤€)
- ë²„í‚· ë‹¨ìœ„ë¡œ lockì„ ì‚¬ìš©í•˜ì—¬ ë²„í‚·ì˜ ìˆ˜ == ë™ì‹œì‘ì—… ê°€ëŠ¥í•œ ì“°ë ˆë“œ ìˆ˜ì´ë‹¤
  - ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ì‚½ì…, ì°¸ì¡°í•˜ë”ë¼ë„ ê·¸ ë°ì´í„°ê°€ ë‹¤ë¥¸ ì„¸ê·¸ë¨¼íŠ¸ì— ìœ„ì¹˜í•˜ë©´ ì„œë¡œ ë½ì„ ì–»ê¸° ìœ„í•´ ê²½ìŸí•˜ì§€ ì•ŠëŠ”ë‹¤.([ì°¸ê³ ](https://devlog-wjdrbs96.tistory.com/269))
- volatileë¡œ êµ¬í˜„ëœ Node

>  [ë§í¬](https://pplenty.tistory.com/17)ê°€ ì˜ ì •ë¦¬ë˜ì–´ ìˆì–´ì„œ ê³µë¶€í–ˆì§€ë§Œ ê·¸ëŸ¼ì—ë„ ì´í•´ê°€ ì•ˆë˜ëŠ” ë¶€ë¶„ì´ ë§ë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´í•´í•˜ê¸°ëŠ” ì‰¬ìš´ ì¼ì´ ì•„ë‹ˆêµ¬ë‚˜...

### ì¸í„°í˜ì´ìŠ¤ëª… + Impl

ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ê°€ í•˜ë‚˜ë§Œ ìˆì„ ë•ŒëŠ” ê´€ë¡€ìƒ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ì— Implì„ ë¶™ì—¬ ì‘ëª…í•œë‹¤.

### OCP, DIP ìœ„ë°˜

ìš°ì„  ê°ì²´ì§€í–¥ì ìœ¼ë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•œ ì ì„ ì‚´í´ë³´ì.

- ì½”ë“œê°€ ì „ì²´ì ìœ¼ë¡œ ì—­í• (ì¸í„°í˜ì´ìŠ¤), êµ¬í˜„(êµ¬ì²´ í´ë˜ìŠ¤)ë¡œ ì˜ ë‚˜ë‰˜ì–´ì¡Œë‹¤.
  - ì—­í• (ì¸í„°í˜ì´ìŠ¤) : MemberService, MemberRepository, OrderService, DiscountPolicy 
  - êµ¬í˜„(êµ¬ì²´ í´ë˜ìŠ¤) : MemberServiceImpl, MemopryMemberRepository, OrderServiceImpl, FixDiscountPolicy, RateDiscountPolicy
- ë‹¤í˜•ì„±ì„ í™œìš©í•˜ì˜€ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ë­ê°€ ë¬¸ì œì¼ê¹Œ? OrderServiceImpl ì—ì„œ í• ì¸ ì •ì±…ì„ ë°”ê¾¼ë‹¤ê³  ìƒê°í•´ë³´ì.

```java
public class OrderServiceImpl implements OrderService {
// private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

OrderServiceì—ì„œ ì½”ë“œì˜ ë³€ê²½ì´ ì¼ì–´ë‚¬ë‹¤! OCP ì›ì¹™ì„ ìœ„ë°˜í•œ ê²ƒì´ë‹¤.

ê²Œë‹¤ê°€ OrderServiceì—ì„œëŠ” FixDiscountPolicyë‘ RateDiscountPolicyì˜ ì¡´ì¬ë¥¼ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤. ì¦‰ ì˜ì¡´ê´€ê³„ì´ë‹¤.

ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì—ë§Œ ì˜ì¡´í•´ì•¼í•œë‹¤ëŠ” DIP ì›ì¹™ê¹Œì§€ ìœ„ë°˜í•˜ê³  ìˆì—ˆë˜ ê²ƒì´ë‹¤.

MemberSerivceImpl ì—ì„œì˜ ìƒí™©ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.

```java
public class MemberServiceImpl implements MemberService {
    private MemberRepository memberRepository = new MemoryMemberRepository(); // êµ¬ì²´ í´ë ˆìŠ¤ì— ì˜ì¡´í•˜ê³  ìˆë‹¤.
}
```

ê·¸ë ‡ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ë§Œë“¤ê³  ì‹¶ì€ë°, ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? 

ì™¸ë¶€ì—ì„œ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ë©´ ëœë‹¤! ì´ë¥¼ ì˜ì¡´ì„± ì£¼ì…(DI : dependency Injection)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

### ì±…ì„ ë¶„ë¦¬

êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°(ì£¼ì…)í•˜ëŠ” ì±…ì„ì„ í•˜ëŠ” í´ë˜ìŠ¤ AppConfig ë¥¼ í•˜ë‚˜ ë§Œë“¤ì

```java
public class AppConfig {
    public MemberService memberService() {
    	return new MemberServiceImpl(new MemoryMemberRepository());
    }
    public OrderService orderService() {
	    return new OrderServiceImpl(new MemoryMemberRepository(),new FixDiscountPolicy());
    }
}
```

MemberServiceImpl, OrderServiceImpl ì—ì„œ ë” ì´ìƒ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ìƒì„±ìë¥¼ í†µí•´ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.

```java
public class MemberServiceImpl implements MemberService {
    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```



```java
public class OrderServiceImpl implements OrderService{
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}
```

### ì—­í• ê³¼ êµ¬í˜„ì„ ì¢€ë” ëª…ë£Œí•˜ê²Œ êµ¬ë¶„í•˜ë„ë¡ AppConfigë¥¼ ë¦¬íŒ©í† ë§ í•  ìˆ˜ ìˆë‹¤.

```java
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    private MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }
}
```

new MemoryMemberRepository() ì¤‘ë³µë„ ì—†ì• ê³ , ì—­í• ë³„ êµ¬í˜„ í´ë˜ìŠ¤ê°€ ë” ì‰½ê²Œ ì½íŒë‹¤.



## Reference

ì´ ê¸€ì€ ê¹€ì˜í•œë‹˜ì˜ [ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard)ì„ ë³´ê³  ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

[1] [[java] ConcurrentHashMap ë™ê¸°í™” ë°©ì‹](https://pplenty.tistory.com/17)

[2] [[Java] ConcurrentHashMapì´ë€ ë¬´ì—‡ì¼ê¹Œ?](https://devlog-wjdrbs96.tistory.com/269)

[3] [ë™ì‹œì„±ì— ëŒ€í•´ì„œ ìƒê°í•´ë³´ì.](https://happy-coding-day.tistory.com/151)

[4] [ìë°” volatile í‚¤ì›Œë“œ](https://parkcheolu.tistory.com/16)[](https://parkcheolu.tistory.com/16)

